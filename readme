installation steps:


es:
docker network create elastic
docker pull docker.elastic.co/elasticsearch/elasticsearch:8.6.1
docker run -itd --name es-node01 --net elastic -p 9200:9200 -p 9300:9300 -t docker.elastic.co/elasticsearch/elasticsearch:8.6.1

kibana:
docker pull docker.elastic.co/kibana/kibana:8.6.1
docker run -itd --name kib-01 --net elastic -p 5601:5601 docker.elastic.co/kibana/kibana:8.6.1

password:
docker exec -it es-node01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic
token:
docker exec -it es-node01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana

filebeat:
sudo docker pull docker.elastic.co/beats/filebeat:8.6.1
sudo docker run -itd --name filebeat01 -\Â 
docker.elastic.co/beats/filebeat:8.6.1 \
setup -E setup.kibana.host=10.117.4.173:80 \
-E output.elasticsearch.hosts=["10.117.4.173:9200"]



install docker:
sudo apt update
sudo apt  install docker.io
sudo chown ubuntu:ubuntu /var/run/docker.sock
sudo sysctl -w vm.max_map_count=262144


setup elk:
git lcone https://github.com/qf-devops/docker-elastic.git
cd docker-elastic

docker node ls 
Edit deployStack.sh:

            #!/bin/bash

            export ELASTIC_VERSION=7.9.1
            export ELASTICSEARCH_USERNAME=elastic
            export ELASTICSEARCH_PASSWORD=changeme
            export ELASTICSEARCH_HOST=ip-172-31-10-180
            export INITIAL_MASTER_NODES=ip-172-31-10-180

            docker network create --driver overlay --attachable elastic
            docker stack deploy --compose-file docker-compose.yml elastic


sh deployStack.sh


http://13.233.151.6/app/home#/tutorial_directory/sampleData


docker-compose:
1.ensure filebeat.yml and metricbeat.yml path set in docker-compose.yml
2. enusre readonly mode these two yml files(metricnbeta.yml , filebeat.yml)
3. docker-compose -f docker-compose.yml up -d
4. docker-compose ps

